{% extends 'CmsBundle:Base:Default.html.twig' %}

{% set pageTitle = 'Добавление раздела' %}

{% block contents %}
<div class="box box_style_inline">
    <div class="box__header">Добавление раздела</div>
    <div class="box__contents">
        <div id="add-section-tabs">
            <ul>
                <li><a href="#add-section-main">Основные свойства</a></li>
                <li><a href="#add-section-meta">Мета-теги</a></li>
                <li><a href="#add-section-extra">Дополнительно</a></li>
            </ul>
            <div id="add-section-main">
                <form action="{{ path('admin.content.add', {'parent': parentId}) }}" method="post" {{ form_enctype(form) }}>
                    <table class="form form_style_commented">
                        <tr class="form__row">
                            <td class="form__field">
                                {{ form_label(form.type) }}<br>
                                {{ form_widget(form.type, {'attr': {'size': 7}}) }}
                            </td>
                            <td class="form__comment">
                                <div id="{{ form.type.vars.id }}_desc"></div>
                                <script>
                                    $(function () {
                                        var desc = {};
                                        {% for i, d in contentTypeDescriptions %}desc['{{ i }}'] = '{{ d }}';
                                        {% endfor %}
                                        $('#{{ form.type.vars.id }}').on('change',
                                            function ()
                                            {
                                                $('#{{ form.type.vars.id }}_desc')
                                                    .html(desc[this.value]);
                                            }
                                        );
                                    });
                                </script>
                            </td>
                        </tr>
                    </table>
                    {{ form_rest(form) }}
                </form>
            </div>
            <div id="add-section-meta">
            </div>
            <div id="add-section-extra">
            </div>
        </div>
    </div>
    <div class="form__footer">
        <button type="submit" class="button button_has_icon button_icon_ok">
            Создать
        </button>
        <button type="button" class="button button_has_icon button_icon_cancel"
                onclick="window.location='{{ path('admin.content') }}'">
            Отменить
        </button>
    </div>
    <script>
        $('#add-section-tabs').tabs({
            event: 'mouseover'
        });
    </script>
</div>
{% endblock %}