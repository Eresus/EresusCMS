Главный файл настроек
=====================

Главный файл настроек — ``cfg/main.php`` — должен быть создан вручную. Для этого можно использовать шаблон ``cfg/main.template.php``, например, выполнив такую команду:

.. code-block:: bash

   cp cfg/main.template.php cfg/main.php

Файл настроек разбит на несколько разделов.

Управление режимом отладки
--------------------------

.. code-block:: php

   <?php
   $Eresus->conf['debug']['enable'] = false;

Включает (``true``) или отключает (``false``) :doc:`режим отладки </manage/debug-mode>`.

Настройки источника данных (СУБД)
---------------------------------

.. code-block:: php

   <?php
   $Eresus->conf['db']['engine'] = 'mysql';
   $Eresus->conf['db']['host'] = 'localhost';
   $Eresus->conf['db']['user'] = 'my_user';
   $Eresus->conf['db']['password'] = 'my_password';
   $Eresus->conf['db']['name'] = 'my_db';

* **engine** — тип СУБД, пока только ``mysql``
* **host** — хост СУБД (можно указать и порт через двоеточие), примеры: ``localhost``, ``mysql.example.org:3301``.
* **user** — имя пользователя СУБД
* **password** — пароль пользователя СУБД
* **name** — имя базы данных

Региональные настройки
----------------------

.. code-block:: php

   <?php
   $Eresus->conf['lang'] = 'ru';

Код языка по умолчанию.

.. code-block:: php

   <?php
   $Eresus->conf['timezone'] = 'Europe/Moscow';

Временная зона по умолчанию.

Настройки сессий
----------------

.. code-block:: php

   <?php
  $Eresus->conf['session']['timeout'] = 30;

Тайм-аут сессии в минутах. По умолчанию: 30

Папки и адреса
--------------

Eresus старается самостоятельно определить пути и адреса места своей установки. Иногда, из-за особенностей хостинга, он может делать это неправильно. В этом случае можно указать соответствующие пути и/или адреса явно.

.. code-block:: php

   <?php
   $Eresus->froot = '/usr/home/site.tld/htdocs/';

Корневая директория сайта.

.. code-block:: php

   <?php
  $Eresus->host = 'example.org';

Хост сайта.

.. code-block:: php

   <?php
   $Eresus->path = '/site_path/';

Путь от хоста до корня сайта.

Обратная совместимость
----------------------

Начиная с версии 2.10 в Eresus появились настройки для управления обратной совместимостью. Эти настройки расположены в файле ``/cfg/main.php``, параметр **$Eresus->conf['backward']**.

Был изменён механизм хеширования пароля для усиления безопасности. Если система устанавливается на сайт, который управлялся более ранней версией, то необходимо установить флаг **weak_password**, для обеспечения совместимости со старым форматом базы пользователей.

.. code-block:: php

   <?php
   'weak_password' => false,

Были изменены базовые классы плагинов, для обеспечения совместимости, они получили другие имена. Если необходимо подключить плагин, использующий старые классы, то можно включить их, установив соответствующие флаги (см. ниже). При этом включение класса автоматически включает и всех его предков.

.. code-block:: php

   <?php
   // Делает доступным класс TPlugins в версиях старше 2.10b
   'TPlugins' => true,
   // Делает доступным класс TPlugin в версиях старше 2.10b
   'TPlugin' => true,
   // Делает доступным класс TContentPlugin в версиях старше 2.10b
   'TContentPlugin' => true,
   // Делает доступным класс TListContentPlugin в версиях старше 2.10b
   'TListContentPlugin' => true,

